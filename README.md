## 알고리즘 트레이딩의 기초 : 개념과 예시

 > 알고리즘이란 태슽크나 프로세스를 수행하기 위해 명확히 정의된 명령의 특정 집합이다.
 
 알고리즘 트레이딩(Algorithmic Trading, Automated Trading, Black-box Trading, 간단히 Algo-Trading)은 컴퓨터를 사용하여 인간(트레이더)이 할 수 없는 속도와 주기로 수익을 내도록 거래 하는 일련의 명령들을 수행하는 프로그램으로 동작됩니다. 정의된 규칙들은 타이밍, 가격, 수량 혹은 다른 수학적 모델에 기초를 두고 있습니다.
 알고-트레이딩은 트레이더에게 수익을 낼 기회를 줄 뿐만아니라, 시장을 좀 더 유동적으로 만들고 트레이딩 활동에서 인간의 감정적인 영향을 없애 좀 더 체계적으로 거래할 수 있습니다.
 
 
 
 ### 트레이더가 다음의 단순한 거래 규칙을 따른다고 가정.
  - 50일 이동평균선이 200일 이동평균선 위로 올라가면 주식 50주를 매수한다.
  - 50일 이동평균선이 200일 이동평균선 아래로 내려가면 주식 50주를 매도한다.
  
  
  
  이 두 가지의 간단한 규칙을 사용하면, 주식 가격(이동평균선 포함)을 자동으로 모니터링하고 매수 및 매도 주문을 넣는 컴퓨터 프로그램을 작성하는 것은 그리 어렵지 않습니다. 트레이더는 더 이상 실시간 가격과 그래프를 계속보면서 직접 주문을 할 필요가 없습니다. 알고리즘 트레이딩 시스템은 자동으로 거래 기회를 포착하고 주문을 넣어주는 개념입니다.
  
  
  
  ## 알고리즘 트레이딩의 이점
  
   #### 알고- 트레이딩은 다음과 같은 이점을 제공합니다 : 
   
    - 최적의 가격에 거래를 수행
    - 즉시, 정확하게 거래 주문을 합니다(그러므로 높은 확률로 우너하는 주문을 넣는다)
    - 많은 가격 변동을 피하기 위하여 정확하고 빠르게 주문을 할 수 있다.
    - 거래 비용(transaction Cost)을 줄인다 (하단의 Implementaion Shortfall을 보라)
    - 여러 시장 조건에 대한 즉각적인 자동 확인한다
    - 수동 주문에 존재하는 오류의 위험을 감소시킨다
    - 이용 가능한 역사적, 실시간 데이터에 대하여 알고리즘 백테스트(Backtest) 할 수 있다.
    - 인간(트레이딩)이 저지를 수 있는 감정적이고 심리적인 실수를 줄일 수 있다.
    
    
    - 현재 알고-트레이딩의 가장 큰 부분은 초단타 매매(High Frequency Trading-HFT)입니다. 이는 미리 프로글매된 명령들에게 기초하여 다양한 시장과 결정 변수에 의존하여 매우 빠른속도로 많은 양의 주문을 합니다.
    
   
   
  #### 알고 - 트레이딩은 트레이딩과 투자 활동의 많은 형태로 사용 됩니다:
  
  - 중- 장기 투자자 혹은 Buy side 펌들(연금펀드, 뮤추얼 펀드, 보험회사) 이 거대 규모의 주식을 구입하지만 주식 가격에 영향을 미치고 싶지 않아 할 때
  - 단기 트레이더와 Sell Side 참여자들(마켓 메이커, 투기자, 재정 거래자) 이 자동화된 주문으로 이득을 얻으려고 할 때, 덧붙이자면, 알고 - 트레이이딩은 마켓의 판매자들이 충분한 유동성을 만들도록 돕는다.
  - 시스템 트레이더들 (추세 추종 투자자, 페어 트레이더, 헤지 펀드 등)이 거래 규칙을 프로그래밍하는 것이 효과적이라고 판단하고 프로그램이 자동으로 주문을 넣게 할 때.
  
  
  - 알고리즘 트레이딩은 인간(트레이더)의 본능과 직관에 의존하는 방법보다 액티브 트레이딩에 좀 더 체계적인 접근법을 제공합니다.
  
  
  
  


### 알고리즘 트레이딩 전략
 > 알고리즘 트레이딩의 모든 전략은(수익 향상 혹은 비용 절감의 측면) 수익이 있다고 판단되는 기회에 대한 포착을 필요로 합니다. 지금부터 알고 - 트레이딩에서 기본적으로 사용되는 전략들을 소개 합니다.
 
 
 
 
 
 #### 추세 추종형 전략(Trend Following Strategies)
 
  - 기술적 지표와 관련된 이동평균선, 채널 브레이크 아웃, 가격 수준 변화에 대한 추세를 따르는 가장 보편적인 알고리즘 트레이딩 전략입니다. 이 전략들은 어떤 예측이나 가격에 대한 예상을 하지 않으므로 구현하기에 매우 쉽고 간단합니다. 거래는 요구되는 추세의 출현에 기초하여 일어나며, 예측 분석의 복잡성없이 알고리즘을 쉽고 직관적으로 구현할 수 있죠. 앞서 말씀 드린 50일 - 200일 이동평균선 예제는 유명한 추세 추종현 전략이빈다.
  
  
  #### 차익 기회(Arbitrage Opportunities)
  
   - 한 시장에서 낮은 가격에 주식을 매수하여 다른 시장에서 비싼 가격에 동시에 매도하는 것은 무위험 수익 혹은 차익(Arbitrage)이라는 가격 차이로 이득을 볼 수 있씁니다. 주식의 선물 시장 또한 시간에 따라 가격이 변화하므로 같은 원리가 적용될 수 있죠. 이와 같은 가격 차이를 확인하고 주문을 넣는 것은 효과적인 방법으로 수익 기회를 만들어 줍니다.
   
   
   
 #### 인덱스 펀드 리밸런싱(Index Fund Rebalacing)
  
   - 인덱스 펀드는 구성 종목을 상대적인 벤치마크 인덱스에 맞추기 위해 일정한 리밸런싱 기간을 가집니다. 이는 알고리즘 트레이더들이 인덱스 펀드의 리밸런싱 직전에 구성 주식 수에 따라 20-80 베이시스 포인트(bps)를 얻을 수 있는 기회를 가져다 주며, 이와 같은 거래는 정확한 시간과 최적의 가격에 거래하는 알고리즘 트레이딩 시스템에 의해 행해질 수 있다.
   
  
  
 #### 수학적 모델 기반 전략
 
 - 옵션과 파생된 증권의 조합의 거래를 통해 + 델타와 - 데랕로 포트폴리오의 델타를 0이 되도록 유지하는 Delta-neutral 트레이딩 전략과 같이 많은 수학적 모델들이 증명되어 있습니다.
 
 
 #### 범위 거래(평균 회귀. Mean Reversion)
  
   - 평균 회귀(Mean Reversion)전략은 자산의 높고 낮은 가격이 일시적인 현상이며 곧 그들의 평균 가격으로 돌아올 것이라는 가정에 기초하고 있습니다. 가격 범위를 확인하고 정의하며, 이 가정에 기초하여 알고리즘 구현하는 것은 가격이 정의된 범위에 들어오거나 벗어날 때 주문을 자동으로 집행 하도록 합니다. 
   
   
   
 #### 거래량 가중평균 가격(Volume Weighted Average Price. VWVP)
 
  - 거래량 가중평균 가격 전략은 거대한 주문을 주식의 특정 거래량에 따라 잘게 나누어 생각합니다. 이는 거래량 가중평균 가격(VWAP)에 가깝게 주문을 실행하여 평균 가격으로 부터 수익을 얻도록 합니다.
  
  
  
#### 시간 가중평균 가격 (Time Weighted Average Price. TWAP)

- 시간 가중평균 가격 전략은 거대한 주문을 시작과 종료 시점 사이에 일정하게 시간을 나눈 슬롯을 따라 잘게 나누어 생각합니다. 이는 시작 및 종료 시점 사이의 평균 가격에 가깝게 주문을 수행하여 시장의 영향을 최소화 하고자 합니다. 


#### 거래량 비율(Percentage of Vloume. POV)
 
 - 거래 주문이 완전히 체결될 때까지 이 알고리즘은 미리 정의된 비율과 시장에서 거래되는 거래량에 따라 계속해서 부분적인 주문을 보냅니다. 연관된 “단계 전략”은 주식의 가격이 사용자가 정의한 수준에 도달했을 때 미리 정의한 시장 거래량의 퍼센티지와 참여 비율을 증가시키거나 감소시키면서 주문을 보냅니다.
 
 
 
 
#### 임플리멘테이션 숏폴 (Implementation Shortfall)

 - [Implementation Shortfall](https://www.investopedia.com/terms/i/implementation-shortfall.asp) 전략은 실시간 시장에서(주문) 실행 비용을 최소화하는 목표를 두고 있습니다. 따라서 지연된 실행의 기회 비용을 통해 주문비용을 절약하고 이득을 얻죠. 이 전략은 주식의 가격이 유리하게 흐르면 목표 참여 비율을 증가시키고 가격이 안좋게 흐르면 비율을 감소시킵니다.
 
 
 
 
 #### 일반적인 트레이딩 알고리즘 외에:
 
  - 서로 다른 사이드의 "해프닝"을 확인하는 특별한 알고리즘의 종류가 있습니다. 예를 들어 이러한 "낌새 알고리즘"은 Sell Side 마켓 메이커가 Buy Side의 대규모 주문을 수행하는 알고리즘의 존재를 파악하죠. 알고리즘을 통한 이와 같은 감지는 마켓 메이커가 대규모 주문에 대한 기회를 파악하고 높은 가격에 해당 주문들을 체결하는 이득을 얻게 합니다. 이는 하이테크 프론트-러닝(Front-Running)으로 불리기도 합니다.
  
  
  
### 알고리즘 트레이딩을 위한 기술적 요구사항

 - 알고리즘을 컴퓨터 프로그램을 이용하여 구현하는 것이 바로 최종 괌누입니다. 백테스팅과 함께 말입니다. 문제는 확인된 전략을 통합한 계산 과정으로 변환시키는 것이고, 거래 계좌를 통해 주문을 넣는 것입니다. 다음의 항목들이 필요.
 
 
  - 요구되는 트레이딩 전략을 프로그래밍하기 위한 컴퓨터 프로그래밍 지식, 고용된 프로그래머 또는 미리 구현된 트레이딩 소프트웨어
  
  - 네트워크 연결과 주문을 넣기 위한 트레이딩 플랫폼 접근.
  
  - 알고리즘에 의해 모니터링되고 주문 기회를 포착할 시장 데이터 피드에 대한 접근.
  
  - 실제 시장에 진입하기 전에 필요한 백테스팅 시스템에 대한 능력과 인프라스트럭쳐
  
  - 구현하는 알고리즘의 복잡도에 따라 백테스팅에 필요한 역사적 데이터
  
 ---------
 
 여기 이해하기 쉬운 예를 보여드리자면, Royal Duth Shell(RDS)은 암스트레담 증권거래소(AEX)와 런던 증권거래소(LSE)에 상징되어 있습니다. 이제 차익 기회 포착을 위한 알고리즘 예를 만들어 보며, 몇 개의 흥미로운 관찰이 가능하다.
 
 
   - AEX는 유로화로 거래하지만 LSE는 파운드 스털링으로 거래한다.
   - 1시간의 시차에 의해, AEX는 LSE보다 일찍 개장하고 다음 몇 시간 동안 동시에 거래되며 AEX가 폐장한 마지막 1시간동안 LSE만이 거래가 가능하다.
   
   
   이제 두 시장에(다른 두 화폐로) 모두 상징된 Royal Dutch Shell에 대한 차익 거래에 대한 가능성을 확인.
   
   - 요구 사항은 다음과 같다.
   
    - 현재 시장 가격을 읽을 수 있는 컴퓨터 프로그램
    - LSE와 AEX에서의 가격 피드
    - GBP - EUR 환율을 위한 외환 시장 피드
    - 올바른 거래소에 주문을 넣기 위한 주문능력
    - 역사적 가격 정보에 대한 백테스팅
    
    
    
   컴퓨터 수행 다음과 같다.
   
    - 두 거래소의 RDS 주식에 대한 가격 정보 확인.
    - 가능한 외환 시세를 사용하여 한 통화에서 다른 통화로 변환
    - 수익 기회를 낼 큰 가격 차이가 존재한다면(중개 수수료를 제외한), 낮은 가격을 가지는 거래소에서 맴수를 하고 높은 가격을 가지는 거래소 매도
    - 주문이 원하는대로 실행한다면, 차익을 얻게 됨
    
  
  
  > 알고리즘 트레이등은 유지하고 실행하기에 그렇게 간단하지 않으며, 만약 이 알고리즘에 의해 생성되는 트레이딩을 할 수 있다면, 다른 시장 참여자들도 그렇게 할 수 있다는 것을 알고 있으면 좋을 것 같습니다. 결국, 가격은 밀리 혹은 마이크로 초로 변동할 것입니다. 위의 예에서 매수 주문을 실행했지만 동시에 매도 주문을 하지 못할 경우를 생각하면, 아마 오픈 포지션(Open Position)이 되어 차익 전략이 쓸모 없어 집니다.
   다만 더 많은 위험과 과제도 있으며, 예를 들어 시스템 실패 위험 ,네트워크 연결 에러, 트레이딩 주문과 실행에 대한 시간 차와 같은것들이 있고, 가장 중요하게는 불완전한 알고리즘이 있겠습니다. 알고리즘이 더 복잡할수록, 실제로 실행되기 전에 더 엄격한 백테스팅이 필요.
   
   
   
   #### 요약
    
    - 알고리즘 퍼포먼스의 양적 분석(Quantitative Analysis)은 매우 중요한 역할을 하며, 세심히 시험되어야 합니다. 컴퓨터의 도움을 받아 자동화를 시켜 별 노력없이 돈을 버는 것은 정말 흥미롭죠. 하지만 시스템이 심도있게 테스트 되어야 하며 한도가 정해져야 된다는 것을 명심하세요. 분석적인 트레이더는 프로그래밍을 배우고 혼자서 시스템을 만들어야 하며, 확실하게 올바른 전략을 구현할 수 있는 자신감을 가져야 합니다. 알고-트레이딩의 신중한 사용과 테스트는 수익 기회를 만들어 낼 수 있습니다.
    
    
    
    
  
  
 
 

   
    
